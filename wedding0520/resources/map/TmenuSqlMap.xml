<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap
			PUBLIC "-//mybatis.org//DTD Map 2.0//EN"
			"http://ibatis.apache.org/dtd/sql-map-2.dtd">
			
<sqlMap>
	<!-- 用于select查询公用抽取的列 -->
	<sql id="Tmenu.columns">
		<![CDATA[
			t_menu.menu_id,t_menu.menu_name,t_menu.menu_url,
			t_menu.parent_id,
			t_menu.field1,t_menu.field2,t_menu.field3
		]]>
	</sql>
	<sql id="Tmenu.findPage.where">
		<dynamic prepend = "WHERE">
			<isNotEmpty prepend="AND" property="menuId">
				<![CDATA[ t_menu.menu_id = #menuId#]]>
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="menuName">
				<![CDATA[ t_menu.menu_name LIKE concat('%',#menuId#,'%']]>
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="menuUrl">
				<![CDATA[ t_menu.menu_url LIKE concat('%',#menuUrl#,'%']]>
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="parentId">
				<![CDATA[ t_menu.parent_id = #parentId#]]>
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="field1">
				<![CDATA[ t_menu.field1 LIKE concat('%',#field1#,'%']]>
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="field2">
				<![CDATA[ t_menu.field2 LIKE concat('%',#field2#,'%']]>
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="field3">
				<![CDATA[ t_menu.field3 LIKE concat('%',#field3#,'%']]>
			</isNotEmpty>
		</dynamic>
	</sql>
	
	<resultMap id="RM_Tmenu" class="com.jp.ht.vo.Tmenu">
		<result property="menuId" column="menu_id"/>
		<result property="menuName" column="menu_name"/>
		<result property="menuUrl" column="menu_url"/>
		<result property="parentId" column="parent_id"/>
		<result property="field1" column="field1"/>
		<result property="field2" column="field2"/>
		<result property="field3" column="field3"/>
	</resultMap>
	<select id="Tmenu.findByCondition" resultMap="RM_Tmenu">
		SELECT <include refid="Tmenu.columns"/> FROM t_menu
		<include refid="Tmenu.findPage.where"/>
		<isNotEmpty property="sortColumns">
			ORDER BY $sortColumns$
		</isNotEmpty>
	</select>
	
</sqlMap>